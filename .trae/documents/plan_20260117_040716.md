# 高考倒计时 - 本地直接打开重构计划

## 核心思路
将 ES Modules 改为 IIFE 模式，保持文件独立结构：
- 每个脚本文件使用 `(function(){ ... })()` 包裹
- 类通过 `GaoKao` 全局命名空间暴露
- HTML 加载脚本使用普通 `<script src="...">` 
- IndexedDB 改为 localStorage（file:// 协议更兼容）

## 修改方案

### 步骤1: 修改各脚本文件（改为IIFE模式）

| 文件 | 修改内容 |
|------|----------|
| `scripts/settings.js` | 改为IIFE，类挂载到 `GaoKao.SettingsManager` |
| `scripts/time.js` | 改为IIFE，类挂载到 `GaoKao.Countdown` |
| `scripts/loading.js` | 改为IIFE，类挂载到 `GaoKao.LoadingManager` |
| `scripts/inspire.js` | 改为IIFE，类挂载到 `GaoKao.QuoteManager` |
| `scripts/notice.js` | 改为IIFE，类挂载到 `GaoKao.NoticeManager` |
| `scripts/snow.js` | 改为IIFE，类挂载到 `GaoKao.SnowManager` |
| `scripts/main.js` | 改为IIFE，引用 `GaoKao.*` |

### 步骤2: 修改HTML
- 移除 `type="module"` 属性
- 调整脚本加载顺序（确保依赖顺序）

### 步骤3: 数据存储
- `IndexedDB` → `localStorage`（完全兼容 file://）

## 修改后的目录结构（不变）

```
/
├── index.html          # 修改脚本引用方式
├── styles/             # 不变
└── scripts/            # 仅修改内部代码格式，文件保持独立
    ├── main.js         # 改为IIFE + 使用GaoKao命名空间
    ├── settings.js     # 改为IIFE + localStorage
    ├── time.js         # 改为IIFE
    ├── loading.js      # 改为IIFE
    ├── inspire.js      # 改为IIFE
    ├── notice.js       # 改为IIFE
    └── snow.js         # 改为IIFE
```